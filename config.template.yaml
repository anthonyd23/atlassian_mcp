# Atlassian MCP Server Configuration Template
# Copy this to config.yaml and fill in your values

# Stack naming
stack_name: atlassian-mcp-stack

# Deployment type: 'cloud' or 'datacenter'
# If not specified, will auto-detect based on which credentials are configured
deployment_type: cloud

# Atlassian Cloud Configuration
cloud:
  atlassian_base_url: https://yourcompany.atlassian.net
  atlassian_username: your-email@company.com
  atlassian_api_token: your-atlassian-api-token
  
  # Bitbucket Cloud (optional)
  bitbucket_workspace: your-workspace
  bitbucket_api_token: your-bitbucket-api-token

# Atlassian Data Center Configuration
datacenter:
  # Jira Data Center
  jira_base_url: https://jira.company.com
  jira_pat_token: your-jira-pat-token
  
  # Confluence Data Center
  confluence_base_url: https://wiki.company.com
  confluence_pat_token: your-confluence-pat-token
  
  # Bitbucket Data Center
  bitbucket_base_url: https://git.company.com
  bitbucket_pat_token: your-bitbucket-pat-token
  bitbucket_project: YOUR_PROJECT

# Ticket Support Agent Configuration (optional - only needed for ticket support tools)
# Enables 3 tools: check_ticket_template, suggest_assignee, get_team_workload
# For Cloud: Use long account IDs (e.g., 712020:xxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
# For Data Center: Use usernames (e.g., jdoe)
ticket_support_agent:
  primary_team_members:
    - account_id: "712020:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
      name: "John Doe"
      title: "Senior Engineer"  # Optional: Senior, Lead, Principal, Engineer, etc.
    - account_id: "712020:yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"
      name: "Jane Smith"
      title: "Lead Engineer"
  secondary_team_members:
    - account_id: "712020:zzzzzzzz-zzzz-zzzz-zzzz-zzzzzzzzzzzz"
      name: "Bob Wilson"
      title: "Engineer"
  excluded_issue_types:
    - "Example Issue Type"
  workload_statuses:
    - "Open"
    - "Ticket Review"
    - "In Progress"
  template_mapping:
    # Map issue types to Confluence template pages
    # AI will use parent_page to find templates and custom_field to match ticket type
    "Your Issue Type":
      parent_page: "Your Template Parent Page"  # Confluence page title or ID
      custom_field: "customfield_xxxxx"  # Custom field containing ticket type
  # JQL query to find unassigned support tickets (optional)
  support_jql: 'assignee is EMPTY AND status = Open ORDER BY created DESC'
  # Confluence parent page containing troubleshooting docs (optional)
  troubleshooting_parent: "Troubleshooting Guides"  # Page title or ID
  # JQL queries for expertise checking (placeholders: {account_id}, {issue_type}, {custom_field_value}, {summary_prefix})
  # Note: {custom_field_value} is extracted from the custom_field defined in template_mapping
  alert_expertise_jql: 'assignee = "{account_id}" AND status = Done AND issuetype = "{issue_type}" AND "Your Custom Field" = "{custom_field_value}" AND summary ~ "{summary_prefix}*"'
  other_expertise_jql: 'assignee = "{account_id}" AND status = Done AND issuetype = "{issue_type}" AND "Your Custom Field" = "{custom_field_value}"'

# Monitoring (optional)
monitoring:
  alert_email: ""  # Leave empty to disable email alerts
